extends ../layout

block content
  h1 Restablecer Contraseña
  form#resetPasswordForm
    .mb-3
      label.form-label(for="username") Nombre de usuario
      input#username.form-control(type="text" name="username" required)
    .mb-3
      label.form-label(for="newPassword") Nueva Contraseña
      input#newPassword.form-control(type="password" name="newPassword" required)
    button.btn.btn-primary(type="submit") Restablecer Contraseña
  p ¿Recordaste tu contraseña? 
    a(href="/login") Inicia sesión aquí

  script.
    document.getElementById('resetPasswordForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const response = await fetch('/auth/reset-password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          username: document.getElementById('username').value,
          newPassword: document.getElementById('newPassword').value
        })
      });
      const data = await response.json();
      if (data.success) {
        alert('Contraseña restablecida exitosamente');
        window.location.href = '/login';
      } else {
        alert(data.message);
      }
    });